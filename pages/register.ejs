<!DOCTYPE html>
<html lang="en">
<head>
    <!-- load up the scripts, links, etc. -->
    <% include ../partials/head %>
</head>

<body>
    <% include ../partials/header %>  

    <div class="jumbotron">
        <h2>This is the register page</h2>
            
        <form action="register" method="put" class="form-login">
            <h2>Please Register in</h2>
            <label for="inputEmail" class="sr-only">Email address</label>
            <input type="email" id="inputEmail" class="form-control" placeholder="Email address" required autofocus>
            <label for="inputUsername" class="sr-only">Username</label>
            <input type="text" id="inputUsername" class="form-control" placeholder="Username" required autofocus>
            <label for="inputPassword" class="sr-only">Password</label>
            <input type="password" id="inputPassword" class="form-control" placeholder="Password" required>
            <button id="reg_button" class="btn btn-lg btn-primary btn-block" type="submit">Register</button>
        </form>
    </div>
</body>

<script>

var ERROR_LOG = console.error.bind(console);
var ip = 'https://evening-cove-32171.herokuapp.com'; // app address

//GET recieves the information from the items table in database, no changes are made
// $.ajax({
//     url: ip+'/register',
//     type: "GET",
//     }).then(redraw, ERROR_LOG);

// function redraw(data){
//     console.log('redrawing', data);
//     };  

/*
$.ajax({
    method: 'GET',
    url: 'http://localhost:8080/register'
    }).then(function success_delete(data){
                       
    }, ERROR_LOG);*/


$('#reg_button').on('click', function(){

    var data = $.param({
          username: $('#inputUsername').val();
          password = $('#inputPassword').val();
          email = $('#inputEmail').val();
    });
    $.ajax({
        url: ip + 'register',
        method: "PUT",
        data: JSON.stringify({
            username = $('#inputUsername').val();
            password = $('#inputPassword').val();
            email = $('#inputEmail').val();
        }),
        contentType: "application/json",
        dataType: "json"        
        }.then(function success_add(data){
            console.log("200 ok");
        }, ERROR_LOG);
});
          
/*





$('#reg_button').on('click', function(){    
    /*var username = $('#inputUsername').val();
    var password = $('#inputPassword').val();
    var email = $('#inputEmail').val();

    var userdetail = {username, password, email};
    console.log("USER DETAIL IN REGISTER PAGE: " + userdetail.email);
    add_user(userdetail);    
});


    $.ajax({
        method: 'PUT',
        url: ip + '/register/auth',
        data: JSON.stringify({
            username = $('#inputUsername').val();
            password = $('#inputPassword').val();
            email = $('#inputEmail').val();
        }),
        contentType: "application/json",
        dataType: "json"        
    }).then(success_add(), ERROR_LOG);


function success_add(){
    console.log("Successfully added user");
}*/


</script>

</html>
