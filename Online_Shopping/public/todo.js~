 $(document).ready(function(e) {

var ERROR_LOG = console.error.bind(console);
var ip = 'https://evening-cove-32171.herokuapp.com'; // app address
//GET recieves the information from the items table in database, no changes are made
$.ajax({
    url: "https://evening-cove-32171.herokuapp.com/items",
    type: "GET",
    }).then(redraw, ERROR_LOG);

function redraw(data){
    console.log('redrawing', data);
    };



	function registerUser(userName, email, password){
		$.ajax({
			method: 'PUT',
			url: ip+'/register',
			data: JSON.stringify({
				username: userName
				email: email
				password: password
			}),
			contentType: "application/json",
			dataType: "json"
		}).then(ERROR_LOG);
	};

	function refreshTasks(data){
		for(task in data){
			var taskName = data[task].task;
			if(taskName === ""){ return false; }
			var taskHTML = '<li><span class="done">%</span>'; 
			taskHTML += '<span class="delete">x</span>';
			taskHTML += '<span class="task"></span></li>';
			var $newTask = $(taskHTML);
			$newTask.find('.task').text(taskName);

			var done = data[task].isdone;
            //adds to completed list if task is done
            if(done){
            	$('#completed-list').prepend($newTask);
            }
            else{
            	$('#todo-list').prepend($newTask);
            }
        }
    };

    function getTasks(){
        $.get(ip+'/all_tasks',function(data){
            refreshTasks(data);
        });
    };
});